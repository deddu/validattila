{"version":3,"sources":["helpers.js","validattila.js","predicates/dates.js","predicates/predicates.js"],"names":[],"mappings":"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","file":"validattila.js","sourcesContent":["function toDate(day){\n  if (lookLikeADate(day)){\n     return isDate(day)\n          ? day\n          : new Date(day);\n  } else {\n    console.warn(day, \"doesn't look like a date. So I'll cast it to now.\");\n    return new Date();\n  }\n}\n\n// combinators\nfunction compose(f, ...rest) {\n  return (rest.length === 0)\n      ? f\n      : (...x) => f(compose(...rest)(x));\n  };\n\n//pipeline applies in sequence\nfunction pipeline(...fns){\n  return (...x) => fns.reduce( (acc, f) => f.apply(null, [acc]), x);\n}\n\n\nmodule.exports = {\n  toDate:toDate,\n  pipeline:pipeline,\n  compose:compose\n};","'use strict';\nconst predicates = require('./predicates/predicates.js');\nconst predidates = require('./predicates/dates.js');\n\nvar defaultrules = [{\n\n}];\n\nfunction call_cb(r,args){\n\t\t\t\tlet v = r.test(...args);\n\t\t\t\t//side effect time!\n\t\t\t\t(v)\n\t\t\t\t\t? r.success(r,...args)\n\t\t\t\t\t: r.fail(r,...args);\n\n\t\t\t\treturn v;\n\t\t\t};\n\nfunction call_evt(r,bus,args){\n\t\t\t\tlet v = r.test(...args);\n\t\t\t\t//side effect time!\n\t\t\t\t(v)\n\t\t\t\t\t? bus.trigger(r.pass_trigger, args)\n\t\t\t\t\t: bus.trigger(r.fail_trigger, args);\n\t\t\t\t\t\n\t\t\t\treturn v;\n\t\t\t};\n\n\n\nfunction validate_cb(rules){\n\t(...args) => predicates.all(\n\t\trules.map((x) => call_cb(x,args)));\n};\n\nfunction validate_evt(rules,bus){\n\t(...args) => predicates.all(\n\t\trules.map((x) => call_evt(x,bus,args)));\n};\n\n\nmodule.exports = function(){\n\treturn {\n \t\tcb:  validate_cb,\n\t \tevt: validate_evt\n\t};\n}","'use strict';\nconst toDate = require('../helpers.js').toDate;\n\n// predicates for dates\nfunction isDate(day){\n  return day instanceof Date;\n}\n\nfunction isValidDate(day){\n  return isDate(day) && day != 'Invalid Date';\n}\n\nfunction lookLikeADate(day){\n  return (isValidDate() || (new Date(day)) != 'Invalid Date' );\n}\n\nfunction afterYesterday (day){\n    return yesterday < toDate(day);\n}\n\nfunction beforeMaxDay(maxday){\n    return (day) => toDate(day) < toDate(maxday);\n}\n\nfunction lessThanInterval (maxdays){\n    return (start, end) => Math.abs(toDate(end).getTime() - toDate(start).getTime() ) < (864e5 * maxdays);\n}\n\nfunction chronoOrder (arrive, depart){\n  return toDate(arrive) < toDate(depart);\n}","'use strict';\n\nfunction empty(x){\n    return existy(x) && (typeof x == 'object')\n        ? ( Array.isArray(x))\n            ? x.length === 0\n            : Object.keys(x).length === 0\n                && JSON.stringify(x) === JSON.stringify({})\n        : ! x  ;\n}\n\nfunction notEmpty(x){\n    return not(empty)(x) ;\n}\n\nfunction existy(x){\n    return (x !== null && x !== undefined);\n}\n\nfunction truthy(x){\n  return (existy(x) && x !== false);\n}\n\n//composites\n\nfunction all(arr){\n    return !!arr && arr.reduce((acc,x) => x && acc, true);\n}\n\nfunction any(arr){\n    return !!arr && arr.reduce((acc,x) => x || acc, false);\n}\n\n\n// higher order decorators and combinators:\n\nfunction not(f){\n    return (...args) => !f(...args);\n}\n\nfunction both(f){\n    return (x,y,...args) => f(x,...args) && f(y,...args);\n}\n\n/*\nwraps the function for sideeffects;\nshitandgiggles = p.wrap(\n  ()=>(console.log('*giggles*','a')), \n  (stuff)=>(console.log('shit!',stuff),'b') );\n\n> shitandgiggles(123)\nshit! [ 123 ]\n*giggles* a\n\n*/\nfunction wrap (f, sideeffect){\n  return (...args) => (sideeffect(...args),\n    f(...args));\n}\n\nconst tap = (value) =>\n (fn) => (\n    typeof(fn) === 'function' && fn(value),\n  value )\n\n\nfunction allF(...funcs){\n  return (...args) => funcs.reduce( (acc,x) => x.apply(null, args) && acc, true);\n}\n\nfunction anyF(...funcs){\n  return (...args) => funcs.reduce( (acc,x) => x.apply(null, args) || acc, false);\n}\n\nmodule.exports = {\n    empty: empty,\n    notEmpty: notEmpty,\n    existy: existy,\n    truthy: truthy,\n    all: all,\n    any: any,\n    not: not,\n    both: both,\n    wrap:wrap,\n    tap: tap,\n    allF: allF,\n    anyF: anyF\n}\n\n"],"sourceRoot":"/source/"}